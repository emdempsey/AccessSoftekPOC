https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2FAzure%2Fazure-quickstart-templates%2Fmaster%2F101-virtual-network%2Fazuredeploy.json

https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2Femdempsey%2FAccessSoftekPOC%2Fmaster%2FAccessSoftekPOC%2FTemplates%2Fastazuredeploy.json

https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2Femdempsey%2FAccessSoftekPOC%2Fmaster%2FAccessSoftekPOC%2FTemplates%2FLoadBalancedVirtualMachine.json

https://raw.githubusercontent.com/emdempsey/AccessSoftekPOC/master/AccessSoftekPOC/Templates/astazuredeploy.json

https://raw.githubusercontent.com/emdempsey/AccessSoftekPOC/master/AccessSoftekPOC/Templates/DevBetaMgmt.json

***Template Files***
$TemplateFile = 'https://raw.githubusercontent.com/emdempsey/AccessSoftekPOC/master/AccessSoftekPOC/Templates/azuredeploy.json'
$TemplateFile = 'https://raw.githubusercontent.com/emdempsey/AccessSoftekPOC/master/AccessSoftekPOC/Templates/VNet.json'
$TemplateFile = 'https://raw.githubusercontent.com/emdempsey/AccessSoftekPOC/master/AccessSoftekPOC/Templates/Public.json'
$TemplateFile = 'https://raw.githubusercontent.com/emdempsey/AccessSoftekPOC/master/AccessSoftekPOC/Templates/DevBetaMgmt.json'
$TemplateFile = 'https://raw.githubusercontent.com/emdempsey/AccessSoftekPOC/master/AccessSoftekPOC/Templates/StgProdMgmt.json'
$TemplateFile = 'https://raw.githubusercontent.com/emdempsey/AccessSoftekPOC/master/AccessSoftekPOC/Templates/DevEnv.json'
$TemplateFile = 'https://raw.githubusercontent.com/emdempsey/AccessSoftekPOC/master/AccessSoftekPOC/Templates/BetaEnv.json'
$TemplateFile = 'https://raw.githubusercontent.com/emdempsey/AccessSoftekPOC/master/AccessSoftekPOC/Templates/StgEnv.json'
$TemplateFile = 'https://raw.githubusercontent.com/emdempsey/AccessSoftekPOC/master/AccessSoftekPOC/Templates/ProdEnv.json'
$TemplateFile = 'https://raw.githubusercontent.com/emdempsey/AccessSoftekPOC/master/AccessSoftekPOC/Templates/StgEnvApp.json'
$TemplateFile = 'https://raw.githubusercontent.com/emdempsey/AccessSoftekPOC/master/AccessSoftekPOC/Templates/StgEnvData.json'
$TemplateFile = 'https://raw.githubusercontent.com/emdempsey/AccessSoftekPOC/master/AccessSoftekPOC/Templates/StgEnvWeb.json'
$TemplateFile = 'https://raw.githubusercontent.com/emdempsey/AccessSoftekPOC/master/AccessSoftekPOC/Templates/ProdEnvApp.json'
$TemplateFile = 'https://raw.githubusercontent.com/emdempsey/AccessSoftekPOC/master/AccessSoftekPOC/Templates/ProdEnvData.json'
$TemplateFile = 'https://raw.githubusercontent.com/emdempsey/AccessSoftekPOC/master/AccessSoftekPOC/Templates/ProdEnvWeb.json'

$prefix = "asb"
$ResourceGroupName = $prefix + 'Group'
$location = "West US"
$adminPassword = "Office365"
$adminUsername = "nimda"
$adminPassword = ConvertTo-SecureString -AsPlainText -Force -String $adminPassword
#$DomainName = "devbeta.macuhosted"
$DomainName = "stageprod.macuhosted"
$vnetname = $prefix + "vnet01"

***Use this command for templates with Default values***
New-AzureResourceGroup -Name $ResourceGroupName -Location $location -TemplateFile $TemplateFile -customerPrefix $prefix -Force -Verbose

***Use this command for environment child templates *EnvApp, *EnvData, *EnvWeb***
New-AzureResourceGroup -Name $ResourceGroupName -Location $location -TemplateFile $TemplateFile -adminUsername $adminusername -adminPassword $adminPassword -customerLocation $location -customerPrefix $Prefix -DomainName $DomainName -VirtualNetworkName $vnetname -Force -Verbose




***Extra Vars if you want to change the defaults

$BetaWebVMCount = 2
$BetaMFMVMCount = 2
$BetaOrphVMCount = 2
$StgWebVMCount = 2
$StgMFMVMCount = 2
$StgOrphVMCount = 2
$ProdWebVMCount = 3
$ProdMFMVMCount = 3
$ProdOrphVMCount = 3


$adminPassword = ConvertTo-SecureString -AsPlainText -Force -String $adminPassword

Switch-AzureMode AzureResourceManager

cls









    "DNS1": "10.0.15.4",
    "DNS2": "10.0.15.5",


            "DNS1": "[variables('DNS1')]",
            "DNS2": "[variables('DNS2')]",
